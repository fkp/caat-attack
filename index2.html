<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>CAAT Attack</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.mapbox.com/mapbox-gl-js/v1.6.1/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.6.1/mapbox-gl.css" rel="stylesheet" />
<style>
	body { margin: 0; padding: 0; }
	#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<style>
#fly {
display: block;
position: relative;
margin: 0px auto;
width: 50%;
height: 40px;
padding: 10px;
border: none;
border-radius: 3px;
font-size: 12px;
text-align: center;
color: #fff;
background: #ee8a65;
}
</style>
<div id="map"></div>
<br />
<button id="fly">Fly</button>
<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoiZnJhc2Vya3AiLCJhIjoiNjUxMjNiMTI3M2Q5YTRlYTkxMzkxNzNhNDYxNGJiMmUifQ.O5ZRm8pWtN1Ao6YNJMRF7Q';
var start = [-3.190, 55.944];
var end = [-3.269965, 55.967333];
var end2 = [-3.269503, 55.967393];
var end3 = [-3.268988, 55.967501];
var end4 = [-3.267469, 55.965649];

var map = new mapboxgl.Map({
container: 'map',
style: 'mapbox://styles/fraserkp/ck435sshr1jp01cs4yzcjczmv',
center: start,
zoom: 11
});
 
var isAtStart = true;
 
document.getElementById('fly').addEventListener('click', function() {
// depending on whether we're currently at point a or b, aim for
// point a or b
var target = isAtStart ? end : start;
 
// and now we're at the opposite point
isAtStart = !isAtStart;
 
PanTo(map, end, 15);
setTimeout(function(){ PanTo(map, end2, 1) }, 3000);
setTimeout(function(){ PanTo(map, end3, 1) }, 4000);
setTimeout(function(){ PanTo(map, end4, 1) }, 5000);
 
function PanTo(map, place, speedRequired) {

map.flyTo({
// These options control the ending camera position: centered at
// the target, at zoom level 9, and north up.
center: place,
zoom: 17,
bearing: 0,
 
// These options control the flight curve, making it move
// slowly and zoom out almost completely before starting
// to pan.
speed: speedRequired,
curve: 1, // change the speed at which it zooms out
 
// This can be any easing function: it takes a number between
// 0 and 1 and returns another number between 0 and 1.
easing: function(t) {
return t;
},
 
// this animation is considered essential with respect to prefers-reduced-motion
essential: true
});
}


});
</script>
 
</body>
</html>